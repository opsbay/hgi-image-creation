# Copyright (c) 2014, 2016 Genome Research Ltd.
#
# Authors:
# * Joshua C. Randall <jcrandall@alum.mit.edu>
# * Christopher Harrison <ch12@sanger.ac.uk>
#
# This file is part of hgi-ansible.
#
# hgi-ansible is free software: you can redistribute it and/or modify it under
# the terms of the GNU General Public License as published by the Free Software
# Foundation; either version 3 of the License, or (at your option) any later
# version.
#
# This program is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
# FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
# details.
#
# You should have received a copy of the GNU General Public License along with
# this program. If not, see <http://www.gnu.org/licenses/>.

[mesos-masters]
hgs4a
hgs4e
hgs4i

[zookeepers]
hgs4b
hgs4f
hgs4j

[mesos-slaves]
hgs4[a:b]
hgs4[d:k]

[marathoners]
#hgs4c
hgs4d
hgs4g
hgs4k

[chronosians]
#hgs4c
hgs4d
hgs4g
hgs4k

[hgs4:children]
mesos-masters
mesos-slaves

[nonroot:children]
hgs4

[hgi-credentials:children]
mesos-masters
mesos-slaves
zookeepers
marathoners
chronosians
openstack-instance-gitlab-runners

[logrotaters:children]
openstack-instance-gitlab-runners

[bamboosians:children]
mesos-slaves

# iRODS client machines with baton
[batonistas]
# None yet...

# Cookie Monster application servers
# n.b., Includes iRODS client configuration
[cookie-monsters]
hgi-cordon-cookie-monster

# Cookie Monster database servers
[cookie-jars]
hgi-cordon-cookie-jar

[cookie-crunchers:children]
cookie-monsters
cookie-jars

[gitlab-runners:children]
openstack-instance-gitlab-runners

[consul-servers:children]
openstack-instance-consul-servers

[sanger-gitlab:children]
gitlab-runners

[openstack-tenant-cleaners:children]
openstance-instance-openstack-tenant-cleaners

[sanger-networks:children]
consul-servers

[s3-credentials:children]
gitlab-runners
consul-servers

# OpenStack instances to be created by Ansible
[openstack-instances:children]
openstack-instance-gitlab-runners
openstack-instance-consul-servers
openstance-instance-openstack-tenant-cleaners

[openstack:children]
openstack-instances

[infoblox-credentials:children]
openstack-instances

[openstack-instance-consul-servers]
consul-server-delta-hgi-01 tenant=delta-hgi-tenant volume=delta-hgi-consul01-volume network=delta-hgi-consul-servers-network image=delta-hgi-docker-image keypair=delta-hgi-ansible-mercury-keypair consul_cluster=consul-cluster-delta-hgi
consul-server-delta-hgi-02 tenant=delta-hgi-tenant volume=delta-hgi-consul02-volume network=delta-hgi-consul-servers-network image=delta-hgi-docker-image keypair=delta-hgi-ansible-mercury-keypair consul_cluster=consul-cluster-delta-hgi
consul-server-delta-hgi-03 tenant=delta-hgi-tenant volume=delta-hgi-consul03-volume network=delta-hgi-consul-servers-network image=delta-hgi-docker-image keypair=delta-hgi-ansible-mercury-keypair consul_cluster=consul-cluster-delta-hgi

[openstack-instance-gitlab-runners]
gitlab-runner-delta-hgi-ci-01 tenant=delta-hgi-ci-tenant network="delta-gitlab-runners-network" image=delta-hgi-docker-image keypair=delta-hgi-ci-ansible-mercury-keypair

[openstance-instance-openstack-tenant-cleaners]
openstack-tenant-cleaner tenant=delta-hgi-tenant network=delta-hgi-network image=delta-hgi-docker-image keypair=delta-hgi-ansible-mercury-keypair

# Groups of dynamic inventory hosts managed by Terraform
#[ssh-gateways]
#openstack_compute_instance_v2.ssh-gateway-hgi ansible_user=ubuntu
#openstack_compute_instance_v2.ssh-gateway-hgiarvados ansible_user=ubuntu
